var SchemaObject = require('schema-object');
var mongoose = require('mongoose');

/**
Campaign
*/
var Ad      = require('./ad');
var Target  = require('./target');

var definition = {
  account_id:String,
  campaign_id:String,
  title:String,
  description:String,
  brand:String,
  startDate:Date,
  endDate:Date,
  budget: {
    currency:String,
    fund:Number
  },
  target: [ Target.definition, minLength: 1 ],
  ads: [ Ad.definition, minLength: 1 ]
};

var db_schema = new mongoose.Schema(definition);

module.exports.definition = definition;
module.exports.schema = new SchemaObject(definition);
module.exports.db_model = mongoose.model("Campaign",db_schema);