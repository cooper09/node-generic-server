var _ = require('underscore');
var models = require('./models');
var BidExt   = models.BidExt;

var pretty_xml = false

module.exports.createBidExt = function (banner_types, bid_amount) {
  console.log("generating bid.ext");
  var ext = {};
  if(_.contains(banner_types, 4)){
    ext["crtype"] = "Image Ad";
    ext["imptrackers"] = [
    "http://rtb-grifter.rhcloud.com/mopub/win/${AUCTION_ID}/${AUCTION_BID_ID}/${AUCTION_IMP_ID}/${AUCTION_SEAT_ID}/${AUCTION_AD_ID}/${AUCTION_PRICE}/"+bid_amount,
    ];
    ext["nurls"] = [
      "http://nurl-grifter.rhcloud.com/mopub/win/${AUCTION_ID}/${AUCTION_BID_ID}/${AUCTION_IMP_ID}/${AUCTION_SEAT_ID}/${AUCTION_AD_ID}/${AUCTION_PRICE}/"+bid_amount
    ];
  }
  console.log(ext);
  var ad = new BidExt( ext );
  return ad;
}
